<?xml version="1.1" encoding="UTF-8"?>

<project i18n.job.generated.documetation="Generated documentation" i18n.job.project.name="Project Name" i18n.job.generated.date="GENERATION DATE" i18n.job.author="AUTHOR" i18n.job.summary="Summary" i18n.job.project.description="Project Description" i18n.job.job.description="Description" i18n.job.job.preview.picture="Preview Picture" i18n.job.job.setting="Settings" i18n.job.context.list="Context List" i18n.job.component.list="Component List" i18n.job.components.description="Components Description" i18n.job.source.code="Source Code" i18n.job.properties="Properties" i18n.job.values="Values" i18n.job.name="Name" i18n.job.language="Language" i18n.job.description="Description" i18n.job.author.min="Author" i18n.job.version="Version" i18n.job.purpose="Purpose" i18n.job.status="Status" i18n.job.creation="Creation" i18n.job.modification="Modification" i18n.job.extract.settings="Extra settings" i18n.job.value="Value" i18n.job.stats.logs="Status &amp; Logs" i18n.job.context="Context" i18n.job.promt="Prompt" i18n.job.need.promt="Need Prompt?" i18n.job.type="Type" i18n.job.source="Source" i18n.job.component.name="Component Name" i18n.job.component.type="Component Type" i18n.job.component="Component" i18n.job.unique.name="UNIQUE NAME" i18n.job.input="INPUT(S)" i18n.job.label="LABEL" i18n.job.output="OUTPUT(S)" i18n.job.component.parameters="Component Parameters:" i18n.job.schema.for="Schema for " i18n.job.column="Column" i18n.job.key="Key" i18n.job.length="Length" i18n.job.precision="Precision" i18n.job.nullable="Nullable" i18n.job.comment="Comment" i18n.job.original.function.parameters="Original Function Parameters:" i18n.job.ended="ended" i18n.job.content="content" i18n.route.manifest.type="Type" i18n.route.manifest.value="Value" i18n.route.resource.name="Name" i18n.route.resource.version="Version" i18n.route.resource.path="Path" name="Main" logo="pictures/logo.jpg" title="Generated by Talend Open Studio for Data Integration" link="http://www.talend.com" language="java" generatedDate="Apr 28, 2017 9:47:43 PM" versionName="Talend Open Studio VERSION " version="6.3.1.20161216_1026" docType="Jobs" company="">
  <pro-description><![CDATA[]]></pro-description>
  <job name="HttpJsonAPI" author="" i18n.job.extract.settings.type="i18n.job.extract.settings" i18n.job.stats.logs.type="i18n.job.stats.logs" version="0.2" purpose="Demo json parsing via java components" status="DEV" creation="Mar 9, 2013 10:57:23 PM" modification="Apr 17, 2017 7:35:33 PM">
    <description><![CDATA[https://libraries.io
https://github.com/json-path/JsonPath<br/>]]></description>
    <preview picture="pictures/HttpJsonAPI_0.2.png"/>
    <contextList>
      <context name="Dev">
        <contextParameter name="keyAPI" prompt="keyAPI?" promptNeeded="false" type="id_String" value="&quot;21fee6827ac055b54a9b40aab3e5ce2f&quot;" source="HttpJsonAPI"/>
        <contextParameter name="login" prompt="login?" promptNeeded="false" type="id_String" value="&quot;dabac76&quot;" source="HttpJsonAPI"/>
        <contextParameter name="page" prompt="page?" promptNeeded="false" type="id_String" value="" source="HttpJsonAPI"/>
        <contextParameter name="per_page" prompt="per_page?" promptNeeded="false" type="id_String" value="" source="HttpJsonAPI"/>
        <contextParameter name="searchList" prompt="searchList?" promptNeeded="false" type="id_File" value="/home/db/project/talend/Resources/MAIN/projects.txt" source="HttpJsonAPI"/>
      </context>
    </contextList>
    <jobSetting>
      <extra>
        <jobParameter name="COMP_DEFAULT_FILE_DIR" value=""/>
        <jobParameter name="Multi thread execution" value="false"/>
        <jobParameter name="Implicit tContextLoad" value="false"/>
      </extra>
      <Statslogs>
        <jobParameter name="Use statistics (tStatCatcher)" value="false"/>
        <jobParameter name="Use logs (tLogCatcher)" value="false"/>
        <jobParameter name="Use volumetrics (tFlowMeterCatcher)" value="false"/>
        <jobParameter name="On Console" value="false"/>
        <jobParameter name="On Files" value="true"/>
        <jobParameter name="File Path" value="Framework.getDefaultStatsDir(context.statsDir, context.baseDir, contextStr, projectName, jobName)"/>
        <jobParameter name="Log File Name" value="String.format(&quot;logs_file.%s.txt&quot;, TalendDate.formatDate(&quot;yyyyMMdd&quot;, TalendDate.getCurrentDate()))"/>
        <jobParameter name="Meter file name" value="String.format(&quot;meter_file.%s.txt&quot;, TalendDate.formatDate(&quot;yyyyMMdd&quot;, TalendDate.getCurrentDate()))"/>
        <jobParameter name="Stats File Name" value="String.format(&quot;stats_file.%s.txt&quot;, TalendDate.formatDate(&quot;yyyyMMdd&quot;, TalendDate.getCurrentDate()))"/>
        <jobParameter name="On Databases" value="false"/>
        <jobParameter name="Catch components statistics" value="false"/>
        <jobParameter name="Catch runtime errors" value="true"/>
        <jobParameter name="Catch user errors" value="true"/>
        <jobParameter name="Catch user warnings" value="true"/>
      </Statslogs>
    </jobSetting>
    <componentList>
      <componentItem name="tFileInputFullRow_1" link="tFileInputFullRow_1" type="tFileInputFullRow" leftTopX="96" leftTopY="288" rightBottomX="128" rightBottomY="320"/>
      <componentItem name="tFlowToIterate_1" link="tFlowToIterate_1" type="tFlowToIterate" leftTopX="672" leftTopY="288" rightBottomX="704" rightBottomY="320"/>
      <componentItem name="tHttpRequest_1" link="tHttpRequest_1" type="tHttpRequest" leftTopX="96" leftTopY="64" rightBottomX="128" rightBottomY="96"/>
      <componentItem name="tHttpRequest_2" link="tHttpRequest_2" type="tHttpRequest" leftTopX="864" leftTopY="288" rightBottomX="896" rightBottomY="320"/>
      <componentItem name="tJavaFlex_1" link="tJavaFlex_1" type="tJavaFlex" leftTopX="288" leftTopY="64" rightBottomX="320" rightBottomY="96"/>
      <componentItem name="tJavaFlex_2" link="tJavaFlex_2" type="tJavaFlex" leftTopX="96" leftTopY="448" rightBottomX="128" rightBottomY="480"/>
      <componentItem name="tJavaRow_1" link="tJavaRow_1" type="tJavaRow" leftTopX="480" leftTopY="288" rightBottomX="512" rightBottomY="320"/>
      <componentItem name="tJavaRow_2" link="tJavaRow_2" type="tJavaRow" leftTopX="288" leftTopY="448" rightBottomX="320" rightBottomY="480"/>
      <componentItem name="tLogCatcher_1" link="tLogCatcher_1" type="tLogCatcher" leftTopX="480" leftTopY="64" rightBottomX="512" rightBottomY="96"/>
      <componentItem name="tLogRow_1" link="tLogRow_1" type="tLogRow" leftTopX="480" leftTopY="448" rightBottomX="512" rightBottomY="480"/>
      <componentItem name="tLogRow_3" link="tLogRow_3" type="tLogRow" leftTopX="640" leftTopY="64" rightBottomX="672" rightBottomY="96"/>
      <componentItem name="tReplace_1" link="tReplace_1" type="tReplace" leftTopX="288" leftTopY="288" rightBottomX="320" rightBottomY="320"/>
    </componentList>
    <internalNodeComponents>
      <component icon="pictures/tFileInputFullRow_1.png" uniqueName="tFileInputFullRow_1" label="searchList">
        <input link="tHttpRequest_1">tHttpRequest_1</input>
        <output link="tReplace_1">tReplace_1</output>
        <componentType>tFileInputFullRow</componentType>
        <parameters>
          <column name="Unique Name" value="tFileInputFullRow_1"/>
          <column name="Component Name" value="tFileInputFullRow"/>
          <column name="Version" value="0.102 (ALPHA)"/>
          <column name="Family" value="File/Input"/>
          <column name="Start" value="false"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="true"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tFileInputFullRow"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="File Name" value="context.searchList"/>
          <column name="Row Separator" value="&quot;\n&quot;"/>
          <column name="Header" value="0"/>
          <column name="Footer" value=""/>
          <column name="Limit" value=""/>
          <column name="Skip empty rows" value="true"/>
          <column name="Encoding" value="&quot;UTF-8&quot;"/>
          <column name="Extract lines at random" value="false"/>
          <column name="Number of lines" value="10"/>
          <column name="Label format" value="searchList"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="Load keyword list (project names) for API search."/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="lapi">
            <column name="productName" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tFlowToIterate_1.png" uniqueName="tFlowToIterate_1" label="forEachMyProject">
        <input link="tJavaRow_1">tJavaRow_1</input>
        <output link="tHttpRequest_2">tHttpRequest_2</output>
        <componentType>tFlowToIterate</componentType>
        <parameters>
          <column name="Unique Name" value="tFlowToIterate_1"/>
          <column name="Component Name" value="tFlowToIterate"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Orchestration"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="true"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tFlowToIterate"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="Use the default (key, value) in global variables." value="true"/>
          <column name="Customize" value="[]"/>
          <column name="Schema" value="Built-In"/>
          <column name="Label format" value="forEachMyProject"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tFlowToIterate_1"/>
        </schemas>
      </component>
      <component icon="pictures/tHttpRequest_1.png" uniqueName="tHttpRequest_1" label="sessionRequest">
        <input>none</input>
        <output link="tJavaFlex_1">tJavaFlex_1</output>
        <output link="tFileInputFullRow_1">tFileInputFullRow_1</output>
        <componentType>tHttpRequest</componentType>
        <parameters>
          <column name="Unique Name" value="tHttpRequest_1"/>
          <column name="Component Name" value="tHttpRequest"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Internet"/>
          <column name="Start" value="true"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="true"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tHttpRequest"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Property" value="Built-In"/>
          <column name="URI" value="&quot;https://libraries.io/api/github/&quot; + context.login + &quot;?api_key=&quot; + context.keyAPI"/>
          <column name="Method" value="GET"/>
          <column name="Post parameters from file" value=""/>
          <column name="Write response content to file" value="false"/>
          <column name="" value="&quot;/home/db/Documents/devel/tos/GithubExamples/labelAPIsession.json&quot;"/>
          <column name="Create directory if not exists" value="false"/>
          <column name="Headers" value="[]"/>
          <column name="Need authentication" value="false"/>
          <column name="user" value="&quot;&quot;"/>
          <column name="password" value="**"/>
          <column name="Die on error" value="true"/>
          <column name="Set timeout" value="false"/>
          <column name="Connect timeout(s)" value="30"/>
          <column name="Read timeout(s)" value="30"/>
          <column name="Label format" value="sessionRequest"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="http://developer.foodessentials.com/api#Search Products"/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tHttpRequest_1">
            <column name="ResponseContent" key="false" type="String" length="" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tHttpRequest_2.png" uniqueName="tHttpRequest_2" label="searchRequest">
        <input link="tFlowToIterate_1">tFlowToIterate_1</input>
        <output link="tJavaFlex_2">tJavaFlex_2</output>
        <componentType>tHttpRequest</componentType>
        <parameters>
          <column name="Unique Name" value="tHttpRequest_2"/>
          <column name="Component Name" value="tHttpRequest"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Internet"/>
          <column name="Start" value="false"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tHttpRequest"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Property" value="Built-In"/>
          <column name="URI" value="&quot;https://libraries.io/api/search?q=&quot; + ((String)globalMap.get(&quot;row4.value&quot;)) + &quot;&amp;api_key=&quot; + context.keyAPI"/>
          <column name="Method" value="GET"/>
          <column name="Post parameters from file" value=""/>
          <column name="Write response content to file" value="false"/>
          <column name="" value="&quot;/home/db/Documents/BagIQ/devdata/labelapi.txt&quot;"/>
          <column name="Create directory if not exists" value="false"/>
          <column name="Headers" value="[]"/>
          <column name="Need authentication" value="false"/>
          <column name="user" value="&quot;&quot;"/>
          <column name="password" value="**"/>
          <column name="Die on error" value="true"/>
          <column name="Set timeout" value="false"/>
          <column name="Connect timeout(s)" value="30"/>
          <column name="Read timeout(s)" value="30"/>
          <column name="Label format" value="searchRequest"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="https://libraries.io/api#project-search"/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tHttpRequest_2">
            <column name="ResponseContent" key="false" type="String" length="" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tJavaFlex_1.png" uniqueName="tJavaFlex_1" label="sessionID">
        <input link="tHttpRequest_1">tHttpRequest_1</input>
        <output>none</output>
        <componentType>tJavaFlex</componentType>
        <parameters>
          <column name="Unique Name" value="tJavaFlex_1"/>
          <column name="Component Name" value="tJavaFlex"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Custom_Code"/>
          <column name="Start" value="false"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="true"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tJavaFlex"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Data Auto Propagate" value="true"/>
          <column name="Start code" value="// This is a dummy component.
// Uncomment in case your http api uses
// sessions, and you have to first initiate one.
//String sessionID;"/>
          <column name="Main code" value="// UNcomment If some API is using sessions. This is the usual path os session id: 
// sessionID = GithubExamples.&lt;String&gt;readJson(row7.ResponseContent, &quot;$.session_id&quot;);
// Github account used for login to libraries.io
System.out.println(&quot;Username: &quot; + GithubExamples.&lt;String&gt;readJson(row7.ResponseContent, &quot;$.login&quot;));
// Demo for explicitly specifying return type
// joda-time lib has to be used. API is returning date time format as: 2016-12-12 12:57:37 UTC
System.out.println(&quot;Since: &quot; + GithubExamples.&lt;DateTime&gt;readJsonExplCast(row7.ResponseContent, &quot;$.created_at&quot;, DateTime.class));

"/>
          <column name="End code" value="// Uncomment. To reference this variable in subsequent joblets use:(String)globalMap.get(&quot;sessionID&quot;)
// globalMap.put(&quot;sessionID&quot;, sessionID);    "/>
          <column name="TOS2.0" value="false"/>
          <column name="TOS3.2" value="false"/>
          <column name="TOS4.0" value="true"/>
          <column name="Import" value="import java.util.Map;
// Mandatory if calling method: GithubExamples.&lt;T&gt;readJsonWithTypeRef
// import com.jayway.jsonpath.TypeRef;
// Used for parsing date format this API is returning
import org.joda.time.DateTime;"/>
          <column name="Label format" value="sessionID"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="Parse response for sessionID, put in globalMap"/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tJavaFlex_1"/>
        </schemas>
      </component>
      <component icon="pictures/tJavaFlex_2.png" uniqueName="tJavaFlex_2" label="parseSubBlock">
        <input link="tHttpRequest_2">tHttpRequest_2</input>
        <output link="tJavaRow_2">tJavaRow_2</output>
        <componentType>tJavaFlex</componentType>
        <parameters>
          <column name="Unique Name" value="tJavaFlex_2"/>
          <column name="Component Name" value="tJavaFlex"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Custom_Code"/>
          <column name="Start" value="false"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tJavaFlex"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Data Auto Propagate" value="true"/>
          <column name="Start code" value="List&lt;Map&lt;String, Object&gt;&gt; projects;
// Simple counter, used as internal product_id (external is provided by LabelAPI: upc)
Integer internalID = 0;"/>
          <column name="Main code" value="// Demonstrate cascaded parsing of response: first get the json block for each product, 
// in next step parse all of its properties.

// https://github.com/json-path/JsonPath
// https://libraries.io/api#project-search

row5.internalID = internalID++;
// Better design would be to contextualize json query. It's hardcoded for clarity (this is a demo after all)
projects =  GithubExamples.&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;readJson(row3.ResponseContent, &quot;$[:4]&quot;);

// Demo for explicitly specifying generic return type
List&lt;String&gt; lic = GithubExamples.&lt;List&lt;String&gt;&gt;readJsonGenCast(row3.ResponseContent, &quot;$[0].normalized_licenses[*]&quot;, new TypeRef&lt;List&lt;String&gt;&gt;(){});
System.out.println(&quot;License list example: &quot; + lic);

// DataFlow loop
for (Map&lt;String, Object&gt; project : projects) {
      row5.jsonProjectSubBlock = project;
"/>
          <column name="End code" value="// end of the component, outside/closing the loop
}"/>
          <column name="TOS2.0" value="false"/>
          <column name="TOS3.2" value="false"/>
          <column name="TOS4.0" value="true"/>
          <column name="Import" value="import java.util.List;
import java.util.Map;
// Mandatory if calling method: GithubExamples.&lt;T&gt;readJsonWithTypeRef
import com.jayway.jsonpath.TypeRef;
"/>
          <column name="Label format" value="parseSubBlock"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="Each nested json block would have its own tJavaFlex component like this"/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tJavaFlex_2">
            <column name="internalID" key="false" type="Integer" length="" precision="" nullable="true" comment=""/>
            <column name="jsonProjectSubBlock" key="false" type="Object" length="" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tJavaRow_1.png" uniqueName="tJavaRow_1" label="transformStep2">
        <input link="tReplace_1">tReplace_1</input>
        <output link="tFlowToIterate_1">tFlowToIterate_1</output>
        <componentType>tJavaRow</componentType>
        <parameters>
          <column name="Unique Name" value="tJavaRow_1"/>
          <column name="Component Name" value="tJavaRow"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Custom_Code"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tJavaRow"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Code" value="output_row.key = &quot;requestQuery&quot;;
//Prepare string for injecting into url: replace blanks with &quot;+&quot; signs
output_row.value = StringHandling.TRIM(StringHandling.EREPLACE(input_row.productName.toLowerCase() , &quot;\\s+&quot;, &quot;+&quot;));
// Using tJavaRow for regex replacement requires import in advance settings"/>
          <column name="Import" value="//import java.util.List;
// Mandatory import for regex expressions
//import java.util.regex"/>
          <column name="Label format" value="transformStep2"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tJavaRow_1">
            <column name="key" key="false" type="String" length="" precision="" nullable="true" comment=""/>
            <column name="value" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tJavaRow_2.png" uniqueName="tJavaRow_2" label="parseLeafTags">
        <input link="tJavaFlex_2">tJavaFlex_2</input>
        <output link="tLogRow_1">tLogRow_1</output>
        <componentType>tJavaRow</componentType>
        <parameters>
          <column name="Unique Name" value="tJavaRow_2"/>
          <column name="Component Name" value="tJavaRow"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Custom_Code"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tJavaRow"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Code" value="// Parsing example if number inside json is quoted
// output_row.number   = Long.valueOf(((HashMap&lt;String, String&gt;)input_row.jsonProjectSubBlock).get(&quot;num_as_text&quot;)).longValue();
output_row.internalID = input_row.internalID;
output_row.rank     = ((HashMap&lt;String, Integer&gt;)input_row.jsonProjectSubBlock).get(&quot;rank&quot;);
output_row.homepage = ((HashMap&lt;String, String&gt; )input_row.jsonProjectSubBlock).get(&quot;homepage&quot;);
output_row.tags     = (((HashMap&lt;String, List&lt;String&gt;&gt;)input_row.jsonProjectSubBlock).get(&quot;keywords&quot;)).toString();
output_row.published = TalendDate.parseDateInUTC(&quot;yyyy-MM-dd HH:mm:ss&quot;,((HashMap&lt;String, String&gt; )input_row.jsonProjectSubBlock).get(&quot;latest_release_published_at&quot;));"/>
          <column name="Import" value="import java.util.HashMap;"/>
          <column name="Label format" value="parseLeafTags"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tJavaRow_2">
            <column name="internalID" key="false" type="Integer" length="" precision="" nullable="true" comment=""/>
            <column name="homepage" key="false" type="String" length="" precision="" nullable="true" comment=""/>
            <column name="rank" key="false" type="Integer" length="" precision="" nullable="true" comment=""/>
            <column name="tags" key="false" type="String" length="" precision="" nullable="true" comment=""/>
            <column name="published" key="false" type="java.util.Date" length="" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tLogCatcher_1.png" uniqueName="tLogCatcher_1" label="errorCatcher">
        <input>none</input>
        <output link="tLogRow_3">tLogRow_3</output>
        <componentType>tLogCatcher</componentType>
        <parameters>
          <column name="Unique Name" value="tLogCatcher_1"/>
          <column name="Component Name" value="tLogCatcher"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Logs_Errors"/>
          <column name="Start" value="true"/>
          <column name="Startable" value="true"/>
          <column name="SUBTREE_START" value="true"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tLogCatcher"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Catch Java Exception" value="true"/>
          <column name="Catch tDie" value="true"/>
          <column name="Catch tWarn" value="true"/>
          <column name="Catch tActionFailure" value="true"/>
          <column name="Label format" value="errorCatcher"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tLogCatcher_1">
            <column name="moment" key="false" type="java.util.Date" length="" precision="" nullable="true" comment=""/>
            <column name="pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="root_pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="father_pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="project" key="false" type="String" length="50" precision="" nullable="true" comment=""/>
            <column name="job" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="context" key="false" type="String" length="50" precision="" nullable="true" comment=""/>
            <column name="priority" key="false" type="Integer" length="3" precision="" nullable="true" comment=""/>
            <column name="type" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="origin" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="message" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="code" key="false" type="Integer" length="3" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tLogRow_1.png" uniqueName="tLogRow_1" label="resultLog">
        <input link="tJavaRow_2">tJavaRow_2</input>
        <output>none</output>
        <componentType>tLogRow</componentType>
        <parameters>
          <column name="Unique Name" value="tLogRow_1"/>
          <column name="Component Name" value="tLogRow"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Logs_Errors"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="true"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tLogRow"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Basic" value="false"/>
          <column name="Table (print values in cells of a table)" value="true"/>
          <column name="Vertical (each row is a key/value list)" value="false"/>
          <column name="Print unique name" value="true"/>
          <column name="Print label" value="false"/>
          <column name="Print unique name and label" value="false"/>
          <column name="Field Separator" value="&quot;|&quot;"/>
          <column name="Print header" value="false"/>
          <column name="Print component unique name in front of each output row" value="false"/>
          <column name="Print schema column name in front of each value" value="false"/>
          <column name="Use fixed length for values" value="false"/>
          <column name="Lengths" value="[{LENGTH=10, SCHEMA_COLUMN=internalID}, {LENGTH=10, SCHEMA_COLUMN=homepage}, {LENGTH=10, SCHEMA_COLUMN=rank}, {LENGTH=10, SCHEMA_COLUMN=tags}, {LENGTH=10, SCHEMA_COLUMN=published}]"/>
          <column name="Print content with log4j" value="true"/>
          <column name="Min column number of optimize code" value="100"/>
          <column name="Label format" value="resultLog"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tLogRow_1">
            <column name="internalID" key="false" type="Integer" length="" precision="" nullable="true" comment=""/>
            <column name="homepage" key="false" type="String" length="" precision="" nullable="true" comment=""/>
            <column name="rank" key="false" type="Integer" length="" precision="" nullable="true" comment=""/>
            <column name="tags" key="false" type="String" length="" precision="" nullable="true" comment=""/>
            <column name="published" key="false" type="java.util.Date" length="" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tLogRow_3.png" uniqueName="tLogRow_3" label="!errorLog!">
        <input link="tLogCatcher_1">tLogCatcher_1</input>
        <output>none</output>
        <componentType>tLogRow</componentType>
        <parameters>
          <column name="Unique Name" value="tLogRow_3"/>
          <column name="Component Name" value="tLogRow"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Logs_Errors"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="true"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tLogRow"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Basic" value="false"/>
          <column name="Table (print values in cells of a table)" value="true"/>
          <column name="Vertical (each row is a key/value list)" value="false"/>
          <column name="Print unique name" value="true"/>
          <column name="Print label" value="false"/>
          <column name="Print unique name and label" value="false"/>
          <column name="Field Separator" value="&quot;|&quot;"/>
          <column name="Print header" value="false"/>
          <column name="Print component unique name in front of each output row" value="false"/>
          <column name="Print schema column name in front of each value" value="false"/>
          <column name="Use fixed length for values" value="false"/>
          <column name="Lengths" value="[{LENGTH=10, SCHEMA_COLUMN=moment}, {LENGTH=10, SCHEMA_COLUMN=pid}, {LENGTH=10, SCHEMA_COLUMN=root_pid}, {LENGTH=10, SCHEMA_COLUMN=father_pid}, {LENGTH=10, SCHEMA_COLUMN=project}, {LENGTH=10, SCHEMA_COLUMN=job}, {LENGTH=10, SCHEMA_COLUMN=context}, {LENGTH=10, SCHEMA_COLUMN=priority}, {LENGTH=10, SCHEMA_COLUMN=type}, {LENGTH=10, SCHEMA_COLUMN=origin}, {LENGTH=10, SCHEMA_COLUMN=message}, {LENGTH=10, SCHEMA_COLUMN=code}]"/>
          <column name="Print content with log4j" value="true"/>
          <column name="Min column number of optimize code" value="100"/>
          <column name="Label format" value="!errorLog!"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="false"/>
          <column name="Comment" value=""/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="tLogRow_3">
            <column name="moment" key="false" type="java.util.Date" length="" precision="" nullable="true" comment=""/>
            <column name="pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="root_pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="father_pid" key="false" type="String" length="20" precision="" nullable="true" comment=""/>
            <column name="project" key="false" type="String" length="50" precision="" nullable="true" comment=""/>
            <column name="job" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="context" key="false" type="String" length="50" precision="" nullable="true" comment=""/>
            <column name="priority" key="false" type="Integer" length="3" precision="" nullable="true" comment=""/>
            <column name="type" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="origin" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="message" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
            <column name="code" key="false" type="Integer" length="3" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
      <component icon="pictures/tReplace_1.png" uniqueName="tReplace_1" label="transformStep1">
        <input link="tFileInputFullRow_1">tFileInputFullRow_1</input>
        <output link="tJavaRow_1">tJavaRow_1</output>
        <componentType>tReplace</componentType>
        <parameters>
          <column name="Unique Name" value="tReplace_1"/>
          <column name="Component Name" value="tReplace"/>
          <column name="Version" value="0.101 (ALPHA)"/>
          <column name="Family" value="Processing"/>
          <column name="Startable" value="false"/>
          <column name="SUBTREE_START" value="false"/>
          <column name="END_OF_FLOW" value="false"/>
          <column name="Activate" value="true"/>
          <column name="DUMMY" value="false"/>
          <column name="tStatCatcher Statistics" value="false"/>
          <column name="Help" value="org.talend.help.tReplace"/>
          <column name="Update components" value="true"/>
          <column name="IREPORT_PATH" value=""/>
          <column name="JAVA_LIBRARY_PATH" value="/home/db/Apps/TOS_DI-20161216_1026-V6.3.1/configuration/lib/java"/>
          <column name="Subjob color" value=""/>
          <column name="Title color" value=""/>
          <column name="REPOSITORY_ALLOW_AUTO_SWITCH" value="true"/>
          <column name="Schema" value="Built-In"/>
          <column name="Simple mode" value="false"/>
          <column name="Search/Replace" value="[]"/>
          <column name="!!!STRICT_MATCH.NAME!!!" value="true"/>
          <column name="Advanced mode ( search with regexp pattern )" value="true"/>
          <column name="Regexp patterns" value="[{REPLACE_COLUMN=&quot;&quot;, INPUT_COLUMN=productName, SEARCH_COLUMN=&quot;^\\W+|[^\\w%]+$&quot;, COMMENT=Remove spec chars from text beginning or end.Preserve % sign.}, {REPLACE_COLUMN=&quot; &quot;, INPUT_COLUMN=productName, SEARCH_COLUMN=&quot;\\s+\\W+|[^\\w%]+\\s+&quot;, COMMENT=Remove spec chars  at each word beginning or end. Preserve them inside. Preserve % sign.}, {REPLACE_COLUMN=&quot;&quot;, INPUT_COLUMN=productName, SEARCH_COLUMN=&quot;(?&lt;!\\S)[a-zA-Z]{1,2}(?!\\S)&quot;, COMMENT=Remove all words of 1 or 2 chars length. These are units of measurement and conjuctions.Preserve numbers.}]"/>
          <column name="Label format" value="transformStep1"/>
          <column name="Hint format" value="&lt;b&gt;__UNIQUE_NAME__&lt;/b&gt;&lt;br&gt;__COMMENT__"/>
          <column name="Connection format" value="row"/>
          <column name="Show Information" value="true"/>
          <column name="Comment" value="Custom transformations before submitting. Could be done with tJavaRow but with mandatory lib import (check import list). tFramework has an namespace issue if this component is used in advanced mode (StringUtils)."/>
          <column name="Use an existing validation rule" value="false"/>
          <column name="Validation Rule Type" value=""/>
        </parameters>
        <schemas>
          <schema name="lapi">
            <column name="productName" key="false" type="String" length="255" precision="" nullable="true" comment=""/>
          </schema>
        </schemas>
      </component>
    </internalNodeComponents>
    <externalNodeComponents/>
    <connections>
      <connection label="row7" lineStyle="0" metaname="tHttpRequest_1" offsetLabelX="0" offsetLabelY="0" source="tHttpRequest_1" target="tJavaFlex_1"/>
      <connection label="OnSubjobOk" lineStyle="1" metaname="tHttpRequest_1" offsetLabelX="0" offsetLabelY="0" source="tHttpRequest_1" target="tFileInputFullRow_1"/>
      <connection label="row1" lineStyle="0" metaname="tFileInputFullRow_1" offsetLabelX="0" offsetLabelY="0" source="tFileInputFullRow_1" target="tReplace_1"/>
      <connection label="row2" lineStyle="0" metaname="tReplace_1" offsetLabelX="0" offsetLabelY="0" source="tReplace_1" target="tJavaRow_1"/>
      <connection label="row4" lineStyle="0" metaname="tJavaRow_1" offsetLabelX="0" offsetLabelY="0" source="tJavaRow_1" target="tFlowToIterate_1"/>
      <connection label="Iterate" lineStyle="7" metaname="tFlowToIterate_1" offsetLabelX="0" offsetLabelY="0" source="tFlowToIterate_1" target="tHttpRequest_2"/>
      <connection label="row3" lineStyle="0" metaname="tHttpRequest_2" offsetLabelX="0" offsetLabelY="0" source="tHttpRequest_2" target="tJavaFlex_2"/>
      <connection label="row5" lineStyle="0" metaname="tJavaFlex_2" offsetLabelX="0" offsetLabelY="0" source="tJavaFlex_2" target="tJavaRow_2"/>
      <connection label="row6" lineStyle="0" metaname="tJavaRow_2" offsetLabelX="0" offsetLabelY="0" source="tJavaRow_2" target="tLogRow_1"/>
      <connection label="row10" lineStyle="0" metaname="tLogCatcher_1" offsetLabelX="0" offsetLabelY="0" source="tLogCatcher_1" target="tLogRow_3"/>
    </connections>
  </job>
</project>
